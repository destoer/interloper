

func main() s32
{
    // TODO: we need a better test
    [fp, err] := open_file("tests/stl/lines.txt",file_mode::read,file_opt::open);
    
    if(err)
    {
        return -1;
    }

    buf : byte[512];

    res := file_read_res::success;

    total : u64 = 0;

    while(res == file_read_res::success)
    {
        [len,res] := read_file_mem(&fp,buf);
        write_str_raw(cast(c8@,&buf[0]),len);
        total += len;
    }

    write_string("\n");

    return cast(s32,total >= 57);
}