
func test_str() s32
{
    lines : s32 = 0;

    [fp,err] := open_file("tests/stl/lines.txt",file_mode::read);

    if(err)
    {
        crash_and_burn("could not open str test file");
    }

    done := false;

    buf : c8[256];

    rc : file_res = file_res::success;

    while(rc == file_res::success)
    {
        [str,rc] := read_file_str(&fp,buf);
        print("{}\n",str);
        lines += 1;
    }

    close_file(&fp);

    return lines;
}

func main() s32
{
    return test_str();
}